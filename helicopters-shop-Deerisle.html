<!DOCTYPE html>
<html lang="uk">
  <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>APEXIA Store</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="{{ url_for('static', filename='donate.css') }}">
        <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}?v=1">
 </head>
    <body>
        <header>
            <nav> 
                <ul>
                    <li><a href="{{ url_for('home') }}">Головна</a></li>
                    <li><a href="{{ url_for('carsDeerisle') }}">Автівки</a></li>
                    <li><a href="{{ url_for('trucksDeerisle') }}">Вантажівки</a></li>
                    <li><a href="{{ url_for('helicoptersDeerisle') }}">Гвинтокрили</a></li>
                    <!--<li><a href="{{ url_for('clothingDeerisle') }}">Комплект одягу</a></li>-->
                    <li><a href="{{ url_for('basesDeerisle') }}">Бази</a></li>
                </ul>
            </nav>
            {% if user %}
            <div class="user-info">
                <a href="/profile">
                    <img src="{{ user.profile_image_url }}"
                    alt="Фото профілю" 
                    class="profile-image">
                </a>
                <div class="info-span">
                    <span>{{ user.name }}</span> 
                </div>
                <div class="cart-panel">
                    <a href="/cart" class="cart-button">
                        <img src="{{ url_for('static', filename='shopping-shop.png') }}" 
                             alt="Кошик" class="cart-icon">
                        <span id="cart-count">0</span>
                    </a>
                </div>
            </div> 
            {% endif %}
        </header>   
        <main>

            <!-- Гвинтокрили -->
            <section id="helicopters" class="category">
                <div class="products">
                    <div class="product">
                        <img src="{{ url_for('static', filename='Helicopter insurance on Vype.webp') }}" alt="Helicopter 1">
                    <h3>Страхування від знищень на вайп Гвинтокрила</h3>
                    <p>Страховка не поширюється на ПВП зони.</p>
                    <p class="promo-stock" data-product="Helicopter insurance on Vype">Завантаження...</p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="45">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴700</h3>
                        <button class="buy" 
                             data-product-id="45" 
                            data-product-name="Helicopter insurance on Vype" 
                            data-product-price="150">
                            Придбати
                        </button>
                    </div>


                    <div class="product">
                        <img src="{{ url_for('static', filename='BELL 429 HELICOPTER.webp') }}" alt="Helicopter 2">
                        <h3>Bell 429</h3>
                        <p>Обсяг багажника: 600 слотів</p>
                        <p>Колір: Чорний</p>
                        <p>Кріплення: Ящик гелікоптерний</p>
                        <p class="promo-stock" data-product="Bell 429">Завантаження...</p>
                        <p></p>
                        <p></p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="46">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴700</h3>
                        <button class="buy" 
                             data-product-id="46" 
                            data-product-name="Bell 429" 
                            data-product-price="700">
                            Придбати
                        </button>
                    </div>
                  
                    <div class="product">
                        <img src="{{ url_for('static', filename='AH-64 APACHE LONGBOW.webp') }}" alt="Helicopter 3">
                        <h3>AH-64 APACHE LONGBOW</h3>
                        <p>Обсяг багажника: 300 слотів</p>
                        <p>Колір: Стандарт</p>
                        <p>Кріплення: Ящик гелікоптерний</p>
                        <p class="promo-stock" data-product="AH-64 APACHE LONGBOW">Завантаження...</p>
                        <p></p>
                        <p></p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="47">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴600</h3>
                        <button class="buy" 
                             data-product-id="47" 
                            data-product-name="AH-64 APACHE LONGBOW" 
                            data-product-price="600">
                            Придбати
                        </button>
                    </div>
                  
                    <div class="product">
                        <img src="{{ url_for('static', filename='UH-60 BLACKHAWK.webp') }}" alt="Helicopter 4">
                        <h3>UH-60 BLACKHAWK</h3>
                        <p>Обсяг багажника: 800 слотів</p>
                        <p>Колір: Чорний</p>
                        <p>Кріплення: Ящик гелікоптерний х2</p>
                        <p class="promo-stock" data-product="UH-60 BLACKHAWK">Завантаження...</p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="48">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴850</h3>
                        <button class="buy" 
                             data-product-id="48" 
                            data-product-name="UH-60 BLACKHAWK" 
                            data-product-price="850">
                            Придбати
                        </button>
                    </div>                 
                   
                    <div class="product">
                        <img src="{{ url_for('static', filename='MBB BO-105M HELICOPTER.webp') }}" alt="Helicopter 5">
                        <h3>MBB BO-105M HELICOPTER</h3>
                        <p>Обсяг багажника: 600 слотів</p>
                        <p>Колір: Стандарт</p>
                        <p>Кріплення: Ящик гелікоптерний</p>
                        <p class="promo-stock" data-product="MBB BO-105M HELICOPTER">Завантаження...</p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="49">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴700</h3>
                        <button class="buy" 
                             data-product-id="49" 
                            data-product-name="MBB BO-105M HELICOPTER" 
                            data-product-price="700">
                            Придбати
                        </button>
                    </div>
                   
                    <div class="product">
                        <img src="{{ url_for('static', filename='BOENG CH-47 CHINOOK HELICOPTER.webp') }}" alt="Helicopter 6">
                        <h3>BOENG CH-47 CHINOOK HELICOPTER</h3>
                        <p>Обсяг багажника: 1000 слотів</p>
                        <p>Колір: Стандарт</p>
                        <p>Кріплення: Ящик гелікоптерний х8</p>
                        <p class="promo-stock" data-product="BOENG CH-47 CHINOOK HELICOPTER">Завантаження...</p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="50">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴1600</h3>
                        <button class="buy" 
                             data-product-id="50" 
                            data-product-name="BOENG CH-47 CHINOOK HELICOPTER" 
                            data-product-price="1600">
                            Придбати
                        </button>
                    </div>    
                   
                    <div class="product">
                        <img src="{{ url_for('static', filename='SIKORSKY CH-53E SUPERSTALLION HELICOPTER.webp') }}" alt="Helicopter 7">
                        <h3>SIKORSKY CH-53E SUPERSTALLION HELICOPTER</h3>
                        <p>Обсяг багажника: 1000 слотів</p>
                        <p>Колір: Стандарт</p>
                        <p>Кріплення: Ящик гелікоптерний х2</p>
                        <p class="promo-stock" data-product="SIKORSKY CH-53E SUPERSTALLION HELICOPTER">Завантаження...</p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="51">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴1400</h3>
                        <button class="buy" 
                             data-product-id="51" 
                            data-product-name="SIKORSKY CH-53E SUPERSTALLION HELICOPTER" 
                            data-product-price="1400">
                            Придбати
                        </button>
                    </div>
                 
                    <div class="product">
                        <img src="{{ url_for('static', filename='MH-6H LITTLE BIRD.webp') }}" alt="Helicopter 8">
                        <h3>MH-6H LITTLE BIRD</h3>
                        <p>Обсяг багажника: 300 слотів</p>
                        <p>Колір: Чорний</p>
                        <p>Кріплення: Ящик гелікоптерний</p>
                        <p class="promo-stock" data-product="MH-6H LITTLE BIRD">Завантаження...</p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="52">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴550</h3>
                        <button class="buy" 
                             data-product-id="52" 
                            data-product-name="MH-6H LITTLE BIRD" 
                            data-product-price="550">
                            Придбати
                        </button>
                    </div>
                  
                    <div class="product">
                        <img src="{{ url_for('static', filename='MIL MI-2 HELICOPTER.webp') }}" alt="Helicopter 9">
                        <h3>MIL MI-2 HELICOPTER</h3>
                        <p>Обсяг багажника: 800 слотів</p>
                        <p>Колір: Зелений</p>
                        <p>Кріплення: Ящик гелікоптерний</p>
                        <p class="promo-stock" data-product="MIL MI-2 HELICOPTER">Завантаження...</p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="53">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴700</h3>
                        <button class="buy" 
                             data-product-id="53" 
                            data-product-name="MIL MI-2 HELICOPTER" 
                            data-product-price="700">
                            Придбати
                        </button>
                    </div>
                    
                    <div class="product">
                        <img src="{{ url_for('static', filename='EUROCOPTER EC135 HELICOPTER.webp') }}" alt="Helicopter 10">
                        <h3>EUROCOPTER EC135 HELICOPTER</h3>
                        <p>Обсяг багажника: 800 слотів</p>
                        <p>Колір: Зелений</p>
                        <p>Кріплення: Ящик гелікоптерний</p>
                        <p class="promo-stock" data-product="EUROCOPTER EC135 HELICOPTER">Завантаження...</p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="54">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴750</h3>
                        <button class="buy" 
                             data-product-id="54" 
                            data-product-name="EUROCOPTER EC135 HELICOPTER" 
                            data-product-price="750">
                            Придбати
                        </button>
                    </div>                                                                                           

                <div class="product">
                    <img src="{{ url_for('static', filename='SIKORSKY S76 HELICOPTER.webp') }}" alt="Helicopter 11">
                    <h3>SIKORSKY S76 HELICOPTER</h3>
                    <p>Обсяг багажника: 600 слотів</p>
                    <p>Колір: Чорний</p>
                    <p>Кріплення: Ящик гелікоптерний</p>
                    <p class="promo-stock" data-product="SIKORSKY S76 HELICOPTER">Завантаження...</p>p>
                    <div class="quantity-control">
                        <button class="decrement">-</button>
                          <span class="quantity" data-product-id="55">1</span>
                        <button class="increment">+</button>
                    </div>
                    <h3>Ціна: ₴700</h3>
                    <button class="buy" 
                         data-product-id="55" 
                        data-product-name="SIKORSKY S76 HELICOPTER" 
                        data-product-price="700">
                        Придбати
                    </button>
                </div>                                                                                           

            <div class="product">
                <img src="{{ url_for('static', filename='BELL UH-1H IROQUOIS.webp') }}" alt="Helicopter 12">
                <h3>BELL UH-1H IROQUOIS</h3>
                <p>Обсяг багажника: 600 слотів</p>
                <p>Колір: Чорний</p>
                <p>Кріплення: Ящик гелікоптерний</p>
                <p class="promo-stock" data-product="BELL UH-1H IROQUOIS">Завантаження...</p>
                <div class="quantity-control">
                    <button class="decrement">-</button>
                      <span class="quantity" data-product-id="56">1</span>
                    <button class="increment">+</button>
                </div>
                <h3>Ціна: ₴800</h3>
                <button class="buy" 
                     data-product-id="56" 
                    data-product-name="BELL UH-1H IROQUOIS" 
                    data-product-price="800">
                    Придбати
                </button>
            </div>                                                                                                                     
        
            </section>

        </main>
    
        <footer>
            <p>&copy; 2025 Магазин DayZ APEXIA Project. Усі права захищені.</p>
        </footer>
        <script src="{{ url_for('static', filename='main.js') }}"></script>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const buyButtons = document.querySelectorAll('.buy');
                const stockElements = document.querySelectorAll(".promo-stock");
            
                // Додавання товару в базу
                buyButtons.forEach(button => {
                    button.addEventListener('click', async () => {
                        const productName = button.getAttribute('data-product-name');
                        const productPrice = button.getAttribute('data-product-price');
            
                        try {
                            const response = await fetch('/product/add', {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify({ name: productName, price: parseFloat(productPrice) })
                            });
            
                            const data = await response.json();
                            if (response.ok && data.success) {
                                alert(`Товар "${productName}" додано до бази з ID: ${data.product_id}`);
                            } else {
                                alert(`Помилка: ${data.message || 'Невідома помилка'}`);
                            }
                        } catch (error) {
                            console.error('Помилка запиту:', error);
                        }
                    });
                });
            
                // Оновлення кількості доступних промокодів
                stockElements.forEach(async (el) => {
                    const productName = el.getAttribute("data-product");
            
                    try {
                        const response = await fetch(`/promo_stock?product=${encodeURIComponent(productName)}`);
                        const data = await response.json();
            
                        if (response.ok && data.success) {
                            el.textContent = `В наявності: ${data.remaining}`;
                        } else {
                            el.textContent = "Помилка отримання даних";
                        }
                    } catch (error) {
                        el.textContent = "Помилка з'єднання";
                    }
                });
            });
            </script>      
    </body>
    </html>