<!DOCTYPE html>
<html lang="uk">
  <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>APEXIA Store</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="{{ url_for('static', filename='donate.css') }}">
        <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}?v=1">
 </head>
    <body>
        <header>
            <nav> 
                <ul>
                    <li><a href="{{ url_for('home') }}">Головна</a></li>
                    <li><a href="{{ url_for('carsChernorus') }}">Автівки</a></li>
                    <li><a href="{{ url_for('trucksChernorus') }}">Вантажівки</a></li>
                    <li><a href="{{ url_for('helicoptersChernorus') }}">Гвинтокрили</a></li>
                    <li><a href="{{ url_for('clothingChernorus') }}">Комплект одягу</a></li>
                    <li><a href="{{ url_for('basesChernorus') }}">Бази</a></li>
                </ul>
            </nav>
            {% if user %}
            <div class="user-info">
                <a href="/profile">
                    <img src="{{ user.profile_image_url }}"
                    alt="Фото профілю" 
                    class="profile-image">
                </a>
                <div class="info-span">
                    <span>{{ user.name }}</span> 
                </div>
                <div class="cart-panel">
                    <a href="/cart" class="cart-button">
                        <img src="{{ url_for('static', filename='shopping-shop.png') }}" 
                             alt="Кошик" class="cart-icon">
                        <span id="cart-count">0</span>
                    </a>
                </div>
            </div> 
            {% endif %}
        </header>   
        <main>
   
            <!-- Комплект одягу -->
            <section id="clothing" class="category">
                <div class="products">

                    <div class="product">
                        <img src="{{ url_for('static', filename='Insurance for a Wipe set.webp') }}" alt="Clothing 1">
                        <h3>Страхування на вайп Комплект-сетів</h3>
                        <p>Страхування від знищень на вайп.</p>
                        <p>Cтраховка не поширюється на ПВП зони.</p>
                        <p class="promo-stock" data-product="Insurance for a Wipe set">Завантаження...</p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="37">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴100</h3>
                        <button class="buy" 
                            data-product-id="37" 
                            data-product-name="Insurance against destruction of wipes of the Suit" 
                            data-product-price="400">
                            Придбати
                        </button>
                    </div>

                    <div class="product">
                        <img src="{{ url_for('static', filename='Woodman.png') }}" alt="Clothing 2">
                        <h3>Woodman</h3>
                        <p>В комплект входить:</p>
                        <p> Куртка 48 слотів.</p>
                        <p> Штани 56 слотів.</p>
                        <p> Тактичний ремінь 12 слотів</p>
                        <p> Рукавиці,  ботінки, шолом</p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="38">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴200</h3>
                        <button class="buy" 
                            data-product-id="38" 
                            data-product-name="Woodman" 
                            data-product-price="400">
                            Придбати
                        </button>
                    </div>

                    <div class="product">
                        <img src="{{ url_for('static', filename='Hunter.png') }}" alt="Clothing 3">
                        <h3>Мисливець</h3>
                        <p>В комплект входить:</p>
                        <p> Куртка 100 слотів.</p>
                        <p> Штани 100 слотів.</p>
                        <p> Рюкзак 100 слотів</p>
                        <p> Маска,  ботінки, камуфляжна накидка</p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="39">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴400</h3>
                        <button class="buy" 
                            data-product-id="39" 
                            data-product-name="Hunter" 
                            data-product-price="400">
                            Придбати
                        </button>
                    </div>

                    <div class="product">
                        <img src="{{ url_for('static', filename='Thunder.png') }}" alt="Clothing 4">
                        <h3>Гром</h3>
                        <p>В комплект входить:</p>
                        <p> Куртка 100 слотів.</p>
                        <p> Штани 100 слотів.</p>
                        <p> Маска, ботінки, окуляри</p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="40">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴300</h3>
                        <button class="buy" 
                            data-product-id="40" 
                            data-product-name="Thunder" 
                            data-product-price="300">
                            Придбати
                        </button>
                    </div>

                    <div class="product">
                        <img src="{{ url_for('static', filename='Fixer.png') }}" alt="Clothing 5">
                        <h3>Фіксер</h3>
                        <p>В комплект входить:</p>
                        <p> Куртка 100 слотів.</p>
                        <p> Штани 100 слотів.</p>
                        <p> Маска, бронежилет</p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="41">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴250</h3>
                        <button class="buy" 
                            data-product-id="41" 
                            data-product-name="Fixer" 
                            data-product-price="250">
                            Придбати
                        </button>
                    </div>

                    <div class="product">
                        <img src="{{ url_for('static', filename='Shadow.png') }}" alt="Clothing 6">
                        <h3>Тінь</h3>
                        <p>В комплект входить:</p>
                        <p> Куртка 100 слотів.</p>
                        <p> Штани 100 слотів.</p>
                        <p> Рюкзак 100 слотів</p>
                        <p> Ботінки, кепка з маской, кепка без маски</p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="42">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴350</h3>
                        <button class="buy" 
                            data-product-id="42" 
                            data-product-name="Shadow" 
                            data-product-price="350">
                            Придбати
                        </button>
                    </div>

                    <div class="product">
                        <img src="{{ url_for('static', filename='Competitor.png') }}" alt="Clothing 7">
                        <h3>Конкурент</h3>
                        <p>В комплект входить:</p>
                        <p> Куртка 100 слотів.</p>
                        <p> Штани 100 слотів.</p>
                        <p> Поясна сумка  100 слотів</p>
                        <p> Рюкзак 100 слотів</p>
                        <p> Ботінки, перчатки, окуляри, кепка з балаклавой</p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="43">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴450</h3>
                        <button class="buy" 
                            data-product-id="43" 
                            data-product-name="Competitor" 
                            data-product-price="450">
                            Придбати
                        </button>
                    </div>

                    <div class="product">
                        <img src="{{ url_for('static', filename='Phantom.png') }}" alt="Clothing 8">
                        <h3>Фантом</h3>
                        <p>В комплект входить:</p>
                        <p> Куртка 100 слотів.</p>
                        <p> Штани 100 слотів.</p>
                        <p> Поясна сумка  100 слотів</p>
                        <p> Ботінки, маска, бронежилет, пончо</p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="44">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴350</h3>
                        <button class="buy" 
                            data-product-id="44" 
                            data-product-name="Phantom" 
                            data-product-price="350">
                            Придбати
                        </button>
                    </div>

                    <div class="product">
                        <img src="{{ url_for('static', filename='Nano Suit1.png') }}" alt="Clothing 9">
                        <img src="{{ url_for('static', filename='Nano Suit2.png') }}">
                        <img src="{{ url_for('static', filename='Nano Suit3.png') }}">
                        <img src="{{ url_for('static', filename='Nano Suit4.png') }}">
                        <h3>Нано-Костюм</h3>
                        <p> Має 10.000 одиниць здоров'я.</p>
                        <p> Має повний захист від хімзи. Має Дод. витривалість.</p>
                        <p> Має стійкість до сильних атак, а також до вогнепальної зброї.</p>
                        <p> В комплект входить:</p>
                        <p> Шолом.</p>
                        <p> Маска від хімзи. Шолом  від хімзи.</p>
                        <p> Верх костюма на 500 слотів.</p>
                        <p> Низ костюма на 500 слотів.</p>
                        <p> Взуття.</p>
                        <p> Рукавички. </p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="45">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴1000</h3>
                        <button class="buy" 
                            data-product-id="45" 
                            data-product-name="Nano Suit" 
                            data-product-price="1000">
                            Придбати
                        </button>
                    </div>

                    <div class="product">
                        <img src="{{ url_for('static', filename='Power frame1.png') }}" alt="Clothing 10">
                        <img src="{{ url_for('static', filename='Power frame2.png') }}">
                        <img src="{{ url_for('static', filename='Power frame3.png') }}">
                        <img src="{{ url_for('static', filename='Power frame4.png') }}">
                        <h3>Силовий каркас</h3>
                        <p> Має міцну захист, а також стійкість до ударів.</p>
                        <p> Має велику кількість одиниць здоров'я.</p>
                        <p> Має 150 слотів а також  слоти під 4 гранати</p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="46">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴250</h3>
                        <button class="buy" 
                            data-product-id="46" 
                            data-product-name="Power frame" 
                            data-product-price="250">
                            Придбати
                        </button>
                    </div>

                    <div class="product">
                        <img src="{{ url_for('static', filename='Exoskeleton power frame.png') }}" alt="Clothing 11">
                        <h3>Силовий каркас екзоскелета</h3>
                        <p> Має міцну захист, а також стійкість до ударів.</p>
                        <p> Має велику кількість одиниць здоров'я.</p>
                        <p> Має доп. слоти.</p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="47">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴200</h3>
                        <button class="buy" 
                            data-product-id="47" 
                            data-product-name="Exoskeleton power frame" 
                            data-product-price="200">
                            Придбати
                        </button>
                    </div>

                    <div class="product">
                        <img src="{{ url_for('static', filename='Exoskeleton power frame +.png') }}" alt="Clothing 12">
                        <h3>Має міцну захист, а також стійкість до ударів.</h3>
                        <p> Має велику кількість одиниць здоров'я.</p>
                        <p>Має 250 слотів а також доп. слоти.</p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="48">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴400</h3>
                        <button class="buy" 
                            data-product-id="48" 
                            data-product-name="Exoskeleton power frame +" 
                            data-product-price="400">
                            Придбати
                        </button>
                    </div>

                    <div class="product">
                        <img src="{{ url_for('static', filename='New exoskeleton with backpack.png') }}" alt="Clothing 13">
                        <h3>Новий екзоскелет з рюкзаком.</h3>
                        <p> Має міцну захист, а також стійкість до ударів.</p>
                        <p> Має велику кількість одиниць здоров'я.</p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="49">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴350</h3>
                        <button class="buy" 
                            data-product-id="49" 
                            data-product-name="Nano Suit" 
                            data-product-price="350">
                            Придбати
                        </button>
                    </div>

                    <div class="product">
                        <img src="{{ url_for('static', filename='Gauss1.png') }}" alt="Clothing 14">
                        <img src="{{ url_for('static', filename='Gauss2.png') }}">
                        <img src="{{ url_for('static', filename='Gauss3.png') }}">
                        <h3>Gauss</h3>
                        <p>Унікальна зброя з вираженим дизайном для ефективної стрільби.</p>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="50">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴500</h3>
                        <button class="buy" 
                            data-product-id="50" 
                            data-product-name="Gauss" 
                            data-product-price="500">
                            Придбати
                        </button>
                    </div>

                    <div class="product">
                        <img src="{{ url_for('static', filename='Backpacks 500slots1.png') }}" alt="Clothing 15">
                        <img src="{{ url_for('static', filename='Backpacks 500slots2.png') }}">
                        <img src="{{ url_for('static', filename='Backpacks 500slots3.png') }}">
                        <img src="{{ url_for('static', filename='Backpacks 500slots4.png') }}">
                        <h3>Рюкзаки 500слотів</h3>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="51">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴500</h3>
                        <button class="buy" 
                            data-product-id="51" 
                            data-product-name="Backpacks 500slots" 
                            data-product-price="500">
                            Придбати
                        </button>
                    </div>

                    <div class="product">
                        <img src="{{ url_for('static', filename='Cases 500 slots1.png') }}" alt="Clothing 16">
                        <img src="{{ url_for('static', filename='Cases 500 slots2.png') }}">
                        <img src="{{ url_for('static', filename='Cases 500 slots2.png') }}">
                        <div class="quantity-control">
                            <h3>Кейси 500 слотов</h3>
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="52">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴350</h3>
                        <button class="buy" 
                            data-product-id="52" 
                            data-product-name="Cases 500 slots" 
                            data-product-price="350">
                            Придбати
                        </button>
                    </div>

                    <div class="product">
                        <img src="{{ url_for('static', filename='Cases 1000 slots1.png') }}" alt="Clothing 17">
                        <img src="{{ url_for('static', filename='Cases 1000 slots2.png') }}">
                        <h3>Кейси 1.000 слотов</h3>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="53">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴500</h3>
                        <button class="buy" 
                            data-product-id="53" 
                            data-product-name="Cases 1000 slots" 
                            data-product-price="500">
                            Придбати
                        </button>
                    </div>

                    <div class="product">
                        <img src="{{ url_for('static', filename='Wooden box for 500 slots.png') }}" alt="Clothing 18">
                        <img src="{{ url_for('static', filename='Wooden box for 500 slots2.png') }}">
                        <h3>Дерев'яний ящик на 500 слотів</h3>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="54">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴350</h3>
                        <button class="buy" 
                            data-product-id="54" 
                            data-product-name="Wooden box for 500 slots" 
                            data-product-price="350">
                            Придбати
                        </button>
                    </div>

                    <div class="product">
                        <img src="{{ url_for('static', filename='Wooden box for 1000 slots.png') }}" alt="Clothing 19">
                        <img src="{{ url_for('static', filename='Wooden box for 1000 slots2.png') }}">
                        <h3>Дерев'яний ящик на 1.000 слотів.</h3>
                        <div class="quantity-control">
                            <button class="decrement">-</button>
                              <span class="quantity" data-product-id="55">1</span>
                            <button class="increment">+</button>
                        </div>
                        <h3>Ціна: ₴500</h3>
                        <button class="buy" 
                            data-product-id="55" 
                            data-product-name="Wooden box for 1000 slots" 
                            data-product-price="500">
                            Придбати
                        </button>
                    </div>

                </div>
            </section>
        </main>
    
        <footer>
            <p>&copy; 2025 Магазин DayZ APEXIA Project. Усі права захищені.</p>
        </footer>
        <script src="{{ url_for('static', filename='main.js') }}"></script>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const buyButtons = document.querySelectorAll('.buy');
                const stockElements = document.querySelectorAll(".promo-stock");
            
                // Додавання товару в базу
                buyButtons.forEach(button => {
                    button.addEventListener('click', async () => {
                        const productName = button.getAttribute('data-product-name');
                        const productPrice = button.getAttribute('data-product-price');
            
                        try {
                            const response = await fetch('/product/add', {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify({ name: productName, price: parseFloat(productPrice) })
                            });
            
                            const data = await response.json();
                            if (response.ok && data.success) {
                                alert(`Товар "${productName}" додано до бази з ID: ${data.product_id}`);
                            } else {
                                alert(`Помилка: ${data.message || 'Невідома помилка'}`);
                            }
                        } catch (error) {
                            console.error('Помилка запиту:', error);
                        }
                    });
                });
            
                // Оновлення кількості доступних промокодів
                stockElements.forEach(async (el) => {
                    const productName = el.getAttribute("data-product");
            
                    try {
                        const response = await fetch(`/promo_stock?product=${encodeURIComponent(productName)}`);
                        const data = await response.json();
            
                        if (response.ok && data.success) {
                            el.textContent = `В наявності: ${data.remaining}`;
                        } else {
                            el.textContent = "Помилка отримання даних";
                        }
                    } catch (error) {
                        el.textContent = "Помилка з'єднання";
                    }
                });
            });
            </script>       
    </body>
    </html>